<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>lab_1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="lab_1_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab_1_files/libs/quarto-html/quarto.js"></script>
<script src="lab_1_files/libs/quarto-html/popper.min.js"></script>
<script src="lab_1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab_1_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab_1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab_1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab_1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab_1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab_1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<p>---</p>
<p>title: “Практическое работа №1”</p>
<p>author: “Давыдова Дарья БИСО-01-20”</p>
<p>format:</p>
<p>md:</p>
<p>output-file: lab_1.md</p>
<p>---</p>
<p># Прохождение курса по R в RStudio через командную строку библиотеки Swirl</p>
<p>## Цель работы</p>
<p>1. Пройти обучение и познакомиться с синтаксисом языка программирования R;</p>
<p>2. Оформить отчет по изученному материалу.</p>
<p>## Ход выполнения работы</p>
<p>Для начала загрузим пакет Swirl, выберем его во вкладке Packages и введём в строку команду `swirl()`. Далее выбираем курс R Programming и попадаем на список уроков, которые требуется сделать. Всего их 14, в рамках работы надо сделать 4 урока.</p>
<p>### Урок №1: Основные блоки программирования на языке R</p>
<p>Самая простая форма, которая может использоваться в R - это интерактивный калькулятор.</p>
<p>```</p>
<p>&gt; 5+7</p>
<p>[1] 12</p>
<p>```</p>
<p>Чтобы не писать каждый раз одно и то же выражение, можно вынести его в переменную “x”. После этого запросить вывод этой переменной.</p>
<p>```</p>
<p>&gt; x&lt;-5+7</p>
<p>&gt; x</p>
<p>[1] 12</p>
<p>```</p>
<p>Далее нужно создать новую переменную “y” и занести туда выражение `x - 3`. После этого снова запросить вывод этой переменной.</p>
<p>```</p>
<p>&gt; y &lt;- x - 3</p>
<p>&gt; y</p>
<p>[1] 9</p>
<p>```</p>
<p>Далее создадим вектор через команду `c()` и занесём его в переменную `z`.</p>
<p>```</p>
<p>&gt; z &lt;- c(1.1, 9, 3.14)</p>
<p>```</p>
<p>Если возникнут вопросы по какой-либо команде, всегда можно добавить знак вопроса (`?`) перед названием команды.</p>
<p>```</p>
<p>&gt; ?c</p>
<p>```</p>
<p>Посмотрим как записался вектор в переменной `z`.</p>
<p>```</p>
<p>&gt; z</p>
<p>[1] 1.10 9.00 3.14</p>
<p>```</p>
<p>Можем скомбинировать вектора в один и вывести информацию на экран. Например, создадим вектор из вектора `z`, 555, `z`.</p>
<p>```</p>
<p>&gt; c(z, 555, z)</p>
<p>[1] 1.10 9.00 3.14 555.00 1.10 9.00 3.14</p>
<p>```</p>
<p>Также вектора могут использоваться в арифметических выражениях. Умножим вектор `z` на 2 и прибавим к нему 100. Эти операции будут производиться с каждым элементом вектора.</p>
<p>```</p>
<p>&gt; z * 2 + 100</p>
<p>[1] 102.20 118.00 106.28</p>
<p>```</p>
<p>Наиболее часто встречающиеся операции `+`, `-`, `/`, `*`, `^` могут прописываться напрямую. Однако чтобы вычислить корень, нужно использовать команду `sqrt()`, а чтобы взять по модулю - `abs()`. Попробуем вычислить корень из z - 1 и занести в переменную `my_sqrt`. Затем узнаем что у нас получился вектор из 3-х чисел, так как вычисление по корню применялось к каждому из них.</p>
<p>```</p>
<p>&gt; my_sqrt &lt;- sqrt(z - 1)</p>
<p>&gt; my_sqrt</p>
<p>[1] 0.3162278 2.8284271 1.4628739</p>
<p>```</p>
<p>Создадим новую переменную `my_div` и занесём туда результат деления значений `z` на `my_sqrt`. Затем узнаем что получилось в итоге и убедимся, что операция выполняется по элементам (т.е. первому элементу первого вектора соответствует первый элемент второго вектора).</p>
<p>```</p>
<p>&gt; my_div &lt;- z / my_sqrt</p>
<p>&gt; my_div</p>
<p>[1] 3.478505 3.181981 2.146460</p>
<p>```</p>
<p>Когда вектора равны по длине, то операция вычисляется элемент к элементу. Но если они разные, то самый короткий вектор повторяется снова, пока более длинный не закончится. Выведем на экран результат сложение 2-х векторов: `c(1, 2, 3, 4)` и `c(0, 10)`.</p>
<p>```</p>
<p>&gt; c(1, 2, 3, 4) + c(0, 10)</p>
<p>[1] 1 12 3 14</p>
<p>```</p>
<p>В случае, если первый вектор закончился, а второй нет, то перебор продолжится, то после вывода результата появится предупреждение “Более длинная длина объекта не кратна более короткой длине объекта”</p>
<p>```</p>
<p>&gt; c(1, 2, 3, 4) + c(0, 10, 100)</p>
<p>[1] 1 12 103 4</p>
<p>Warning message:</p>
<p>In c(1, 2, 3, 4) + c(0, 10, 100) :</p>
<p>longer object length is not a multiple of shorter object length</p>
<p>```</p>
<p>Далее рассмотрим лайфхаки, которые сократят время. С помощью стрелок вверх-вниз можно посмотреть какие команды были ранее. Это поможет при отладке и просто в случаях, когда надо повторить команду. Найдём выражение `z * 2 + 100` и поменяем `100` на `1000`.</p>
<p>```</p>
<p>&gt; z * 2 + 1000</p>
<p>[1] 1002.20 1018.00 1006.28</p>
<p>```</p>
<p>В случае, если забыли верное название какой-то переменной, то на помощь придёт `Tab`. Просто нужно ввести первые символы переменной и нажать на табуляцию, чтобы появился список переменных с таким началом. Найдём переменную `my_div` по началу `my_` и узнаем её значение.</p>
<p>```</p>
<p>&gt; my_div</p>
<p>[1] 3.478505 3.181981 2.146460</p>
<p>```</p>
<p>### Урок №2: Рабочее пространство и файлы</p>
<p>Определим, какой каталог использует текущий сеанс R в качестве текущего рабочего каталога, используя команду `getwd()`.</p>
<p>```</p>
<p>&gt; getwd()</p>
<p>[1] “C:/Users/Юлия/Documents/PZ_sem7_7”</p>
<p>```</p>
<p>Выведем на экран все объекты локальной рабочей среды с помощью команды `ls()`. Так как переменных изначально не было, на экран вывело “character(0)”</p>
<p>```</p>
<p>&gt; ls()</p>
<p>character(0)</p>
<p>```</p>
<p>Назначим 9 в x с помощью команды “x &lt;- 9”.</p>
<p>```</p>
<p>&gt; x &lt;- 9</p>
<p>```</p>
<p>Теперь посмотрим на объекты локальной рабочей среды с помощью команды “ls()”.</p>
<p>```</p>
<p>&gt; ls()</p>
<p>[1] “x”</p>
<p>```</p>
<p>Выведем на экран все файлы рабочей директории с помощью команд “list.files()” или “dir()”.</p>
<p>```</p>
<p>&gt; dir()</p>
<p>[1] “pppr_1.html” “pppr_1.qmd” “pppr_1_files” “PZ_1”</p>
<p>[5] “PZ_1.md” “PZ_sem7_2.Rproj” “README.md” “testdir”</p>
<p>```</p>
<p>Попробуем функцию вызова информации по команде `list.files`.</p>
<p>```</p>
<p>&gt; ?list.files</p>
<p>```</p>
<p>Используя функцию `args()` мы можем узнать какие аргументы даёт введёная в скобках функция. Посмотрим аргументы команды `list.files()`</p>
<p>```</p>
<p>&gt; args(list.files)</p>
<p>function (path = “.”, pattern = NULL, all.files = FALSE, full.names = FALSE,</p>
<p>recursive = FALSE, ignore.case = FALSE, include.dirs = FALSE,</p>
<p>no.. = FALSE)</p>
<p>NULL</p>
<p>```</p>
<p>Зададим в переменную `old.dir` нашу рабочую директорию. Это нужно, чтобы в конце к ней вернуться.</p>
<p>```</p>
<p>&gt; old.dir &lt;- getwd()</p>
<p>```</p>
<p>С помощью команды `dir.create()` создадим новый директорий с именем `testdir` в уже существующий. Так как он был создан ранее, то программа выдаст предупреждение.</p>
<p>```</p>
<p>&gt; dir.create(“testdir”)</p>
<p>Warning message:</p>
<p>In dir.create(“testdir”) : `testdir` already exists</p>
<p>```</p>
<p>Чтобы работать в этой директории, надо задать её как рабочую с помощью команды `setwd()`.</p>
<p>```</p>
<p>&gt; setwd(“testdir”)</p>
<p>```</p>
<p>Создадим файл `mytest.R`, используя функцию `file.create()`.</p>
<p>```</p>
<p>&gt; file.create(“mytest.R”)</p>
<p>[1] TRUE</p>
<p>```</p>
<p>Проверим, какие файлы у нас лежат в новой директории.</p>
<p>```</p>
<p>&gt; dir()</p>
<p>[1] “mytest.R”</p>
<p>```</p>
<p>Чтобы проверить, существует ли `mytest.R` в рабочей директории, используем команду `file.exists()`.</p>
<p>```</p>
<p>&gt; file.exists(“mytest.R”)</p>
<p>[1] TRUE</p>
<p>```</p>
<p>Посмотрим информацию о файле `mytest.R`, используя команду `file.info()`.</p>
<p>```</p>
<p>&gt; file.info(“mytest.R”)</p>
<p>size isdir mode mtime ctime</p>
<p>mytest.R 0 FALSE 666 2023-09-30 11:36:47 2023-09-28 15:47:09</p>
<p>atime exe</p>
<p>mytest.R 2023-09-30 11:36:47 no</p>
<p>```</p>
<p>Переименуем файл `mytest.R` в `mytest2.R`, используя команду `file.rename()`.</p>
<p>```</p>
<p>&gt; file.rename(“mytest.R”, “mytest2.R”)</p>
<p>[1] TRUE</p>
<p>```</p>
<p>Сделаем копию файла `mytest2.R` и назовём копию `mytest3.R`, используя команду `file.copy()`.</p>
<p>```</p>
<p>&gt; file.copy(“mytest2.R”, “mytest3.R”)</p>
<p>[1] TRUE</p>
<p>```</p>
<p>Укажите родительский путь к файлу `mytest3.R`, используя команду `file.path()`.</p>
<p>```</p>
<p>&gt; file.path(“mytest3.R”)</p>
<p>[1] “mytest3.R”</p>
<p>```</p>
<p>Можно использовать `file.path()` для построения путей к файлам и каталогам, которые не зависят от операционной системы, в которой выполняется наш R-код. Передадим `folder1` и `folder2` в качестве аргументов для создания независимого от платформы имени пути.</p>
<p>```</p>
<p>&gt; file.path(“folder1”, “folder2”)</p>
<p>[1] “folder1/folder2”</p>
<p>```</p>
<p>Посмотрим документацию команды `dir.create` с помощью вопросительного знака.</p>
<p>```</p>
<p>&gt; ?dir.create</p>
<p>```</p>
<p>Создадим новый директорий в нашей рабочей директории и назовём его `testdir2`, а также создадим сабдиректорий и назовём его `testdir3`, используя только команды `dir.create()` и `file.path()`.</p>
<p>```</p>
<p>&gt; dir.create(file.path(`testdir2`, `testdir3`), recursive = TRUE)</p>
<p>```</p>
<p>Вернёмся обратно в рабочую директорию на компьютере, с помощью команды `setwd()`. Вспомним, что ранее мы заносили её в переменную `old.dir`.</p>
<p>```</p>
<p>&gt; setwd(old.dir)</p>
<p>```</p>
<p>### Урок №3: Последовательности чисел</p>
<p>Самый простой способ создать последовательность чисел - использовать оператор `:`. Введём `1:20`, чтобы увидеть как это работает.</p>
<p>```</p>
<p>&gt; 1:20</p>
<p>[1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20</p>
<p>```</p>
<p>Также мы можем создать последовательность из вещественных чисел. Для этого используем команду `pi:10`, чтобы создать последовательность от числа Пи.</p>
<p>```</p>
<p>&gt; pi:10</p>
<p>[1] 3.141593 4.141593 5.141593 6.141593 7.141593 8.141593 9.141593</p>
<p>```</p>
<p>Если поменять цифры местами, то получится обратный список последовательности чисел. Попробуем перевернуть список с помощью команды `15:1`.</p>
<p>```</p>
<p>&gt; 15:1</p>
<p>[1] 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1</p>
<p>```</p>
<p>Важно помнить, что при запросе документации по оператору, его необходимо заключить в ``подобные`` кавычки. Попробуем узнать информацию об операторе `?`.</p>
<p>```</p>
<p>&gt; ?`:`</p>
<p>```</p>
<p>Существует операция `seq()`, аналогичная оператору `:`. Убедимся в этом с помощью команды `seq(1, 20)`.</p>
<p>```</p>
<p>&gt; seq(1, 20)</p>
<p>[1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20</p>
<p>```</p>
<p>Можно задать последовательность чисел и указать шаг, на который будет сдвигаться генерация чисел. Создадим последовательность от 0 до 10 с шагом 0.5 с помощью команды `seq(0, 20, by=0.5)`.</p>
<p>```</p>
<p>&gt; seq(0, 10, by=0.5)</p>
<p>[1] 0.0 0.5 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5</p>
<p>[15] 7.0 7.5 8.0 8.5 9.0 9.5 10.0</p>
<p>```</p>
<p>Если нас не волнует, какое приращение задано и мы просто хотим создать последовательность от 5 до 10, которое включает в себя 30 элементов. Создадим данную последовательность через команду `seq(5, 10, length=30)` и занесём её в переменную `my_seq`.</p>
<p>```</p>
<p>&gt; my_seq &lt;- seq(5, 10, length=30)</p>
<p>```</p>
<p>Чтобы убедиться, что последовательность имеет длину 30, ипользуем команду `length()`.</p>
<p>```</p>
<p>&gt; length(my_seq)</p>
<p>[1] 30</p>
<p>```</p>
<p>Теперь посмотрим как мы можем комбинировать команды между собой. Используем значение длины 30 и попробуем задать последовательность `1:30` с использованием команды `length(my_seq)`.</p>
<p>```</p>
<p>&gt; 1:length(my_seq)</p>
<p>[1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23</p>
<p>[24] 24 25 26 27 28 29 30</p>
<p>```</p>
<p>Есть и другой вариант использования данной конструкции, используя функцию `along.with`, которая берет длину из длины аргумента (замена length()).</p>
<p>```</p>
<p>&gt; seq(along.with = my_seq)</p>
<p>[1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23</p>
<p>[24] 24 25 26 27 28 29 30</p>
<p>```</p>
<p>Однако, как и в случае со многими распространенными задачами, R имеет отдельную встроенную функцию для этой цели, называемую `seq_along()`. Она составляет на основе длины последловательности свою собственную.</p>
<p>```</p>
<p>&gt; seq_along(my_seq)</p>
<p>[1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23</p>
<p>[24] 24 25 26 27 28 29 30</p>
<p>```</p>
<p>Также существует функция повторения числа или вектора n-ное количество раз. Создадим вектор, который содержит в себе 40 нулей с помощью команды `rep(0, times = 40)`.</p>
<p>```</p>
<p>&gt; rep(0, times = 40)</p>
<p>[1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</p>
<p>[36] 0 0 0 0 0</p>
<p>```</p>
<p>Посмотрим как эта же функция можем справиться с векторами, созданными через функцию `c(0, 1, 2)`. Повторим её 10 раз с помощью команды `rep(c(0, 1, 2), times = 10)`.</p>
<p>```</p>
<p>&gt; rep(c(0, 1, 2), times = 10)</p>
<p>[1] 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2</p>
<p>```</p>
<p>Стоит отметить, что если нам требуется повторить каждый элемент, то на помощь придёт функция `each()`. Попробуем повторить 10 раз каждый из элементов вектора `c(0, 1, 2)` с помощью команды `rep(c(0, 1, 2), each = 10)`.</p>
<p>```</p>
<p>&gt; rep(c(0, 1, 2), each = 10)</p>
<p>[1] 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2</p>
<p>```</p>
<p>### Урок №4: Векторы</p>
<p>Начнём с создания вектора чисел, который содержит значения `0.5`, `55`, `-10`, `6` и занесён в переменную `num_vect`.</p>
<p>```</p>
<p>&gt; num_vect &lt;- c(0.5, 55, -10, 6)</p>
<p>```</p>
<p>Далее создадим новую переменную `tf` и дадим ей значение результата `num_vect &lt; 1`. В итоге мы получим вектор, содержащий 4 логических значения [TRUE | FALSE]</p>
<p>```</p>
<p>&gt; tf &lt;- num_vect &lt; 1</p>
<p>```</p>
<p>Выведем на экран значение переменной `tf`.</p>
<p>```</p>
<p>&gt; tf</p>
<p>[1] TRUE FALSE TRUE FALSE</p>
<p>```</p>
<p>Далее выведем на экран результат работы команды `num_vect &gt;= 6` без занесения в переменную.</p>
<p>```</p>
<p>&gt; num_vect &gt;= 6</p>
<p>[1] FALSE TRUE FALSE TRUE</p>
<p>```</p>
<p>Далее необходимо пройти мини-тест, содержащий в себе 2 варианта ответа.</p>
<p>***Вопрос №1.***</p>
<p>```</p>
<p>(3 &gt; 5) &amp; (4 == 4)</p>
<p>FALSE &amp; TRUE = FALSE</p>
<p>```</p>
<p>*Ответ:* FALSE</p>
<p>***Вопрос №2.***</p>
<p>```</p>
<p>(TRUE == TRUE) | (TRUE == FALSE)</p>
<p>TRUE | FALSE = TRUE</p>
<p>```</p>
<p>*Ответ:* TRUE</p>
<p>***Вопрос №3.***</p>
<p>```</p>
<p>((111 &gt;= 111) | !(TRUE)) &amp; ((4 + 1) == 5)</p>
<p>(TRUE | FALSE) &amp; TRUE</p>
<p>TRUE &amp; TRUE</p>
<p>```</p>
<p>*Ответ:* TRUE</p>
<p>Вектора могут состоять не только из чисел, но и из символов. Для того, чтобы задать в вектор символьные элементы, необходимо использовать двойные кавычки-лапки `““`, чтобы обозначить строковый элемент. Зададим вектор, состоящий из 3-х слов”My”, “name”, “is” и занесём его в переменную `my_char`.</p>
<p>```</p>
<p>&gt; my_char &lt;- c(“My”, “name”, “is”)</p>
<p>```</p>
<p>Выведем на экран значение вектора `my_char`.</p>
<p>```</p>
<p>&gt; my_char</p>
<p>[1] “My” “name” “is”</p>
<p>```</p>
<p>Сейчас этот вектор имеет длину 3. Соединим его в один с помощью команды `paste()` и добавим пробел, который будет соединять элементы `collapse = ” “`, а затем выведем всё на экран.</p>
<p>```</p>
<p>&gt; paste(my_char, collapse = ” “)</p>
<p>[1] “My name is”</p>
<p>```</p>
<p>Осталось только создать новый вектор и добавить туда своё имя. Создадим новую переменную `my_name` и занесём туда новый результат.</p>
<p>```</p>
<p>&gt; my_name &lt;- c(my_char, “Yuliya”)</p>
<p>```</p>
<p>Выведем на экран значение переменной `my_name`.</p>
<p>```</p>
<p>&gt; my_name</p>
<p>[1] “My” “name” “is” “Yuliya”</p>
<p>```</p>
<p>Так как вектор записался по элементам, его нужно соединить, добавив пробел между ними.</p>
<p>```</p>
<p>&gt; paste(my_name, collapse = ” “)</p>
<p>[1] “My name is Yuliya”</p>
<p>```</p>
<p>Рассмотрим другой вариант - добавление соединяющего символа (пробела) при объединении других с помощью команды `sep = ” “`. Соединим слова”Hello” и “world!”, добавив пробел между ними и выведем это на экран.</p>
<p>```</p>
<p>&gt; paste(“Hello”, “world!”, sep = ” “)</p>
<p>[1] “Hello world!”</p>
<p>```</p>
<p>Рассмотрим вариант соединения двух векторов в один. Соединим вектор от 1 до 3 с вектором (“X”, “Y”, “Z”), не используя пробел как соединитель между элементами.</p>
<p>```</p>
<p>&gt; paste(1:3, c(“X”,“Y”,“Z”), sep = ““)</p>
<p>[1] “1X” “2Y” “3Z”</p>
<p>```</p>
<p>Если вектора имеют разную длину, то меньший вектор повторяется снова, пока больший не закончится. Попробуем перебрать и соединить все буквы латинского алфавита с вектором от 1 до 4, используя соединитель `sep = “-”`. Команда `LETTERS` автоматически перебирает все буквы, без нужды указывать каждую.</p>
<p>```</p>
<p>&gt; paste(LETTERS, 1:4, sep = “-”)</p>
<p>[1] “A-1” “B-2” “C-3” “D-4” “E-1” “F-2” “G-3” “H-4” “I-1” “J-2” “K-3” “L-4”</p>
<p>[13] “M-1” “N-2” “O-3” “P-4” “Q-1” “R-2” “S-3” “T-4” “U-1” “V-2” “W-3” “X-4”</p>
<p>[25] “Y-1” “Z-2”</p>
<p>```</p>
<p>## Оценка результатов</p>
<p>Пройдено 4 урока из интерактивного курса Swirl по основам языка R.</p>
<p>## Вывод</p>
<p>В результате выполнения работы были получены базовые навыки программирования на языке R.</p>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>